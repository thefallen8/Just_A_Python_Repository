pipeline {
    agent any

    stages {
        stage('Extract and Concatenate Payload Information') {
            steps {
                script {
                    // Retrieve the JSON values from environment variables
                    def ref = env.BRANCH
                    def svnUrl = env.PAYLOAD

                    // Check if ref and svnUrl are present
                    if (ref && svnUrl) {
                        // Extract branch name from ref
                        def branch = ref.substring(ref.indexOf('feature'))
                        
                        // Concatenate the values
                        def concatenatedResult = "${svnUrl}/tree/${branch}"

                        // Print the result to the console
                        echo "Concatenated Result: ${concatenatedResult}"
                    } else {
                        error "Required environment variables are not set."
                    }
                }
            }
        }
    }
}
